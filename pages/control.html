<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
        <link rel="stylesheet" type="text/css" href="../static/css/WhiteS.css"/>
        <link rel="stylesheet" type="text/css" href="../static/css/main.css"/>
        <script src="../static/js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../static/js/WhiteS.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
        <div class="main-box ">
            <div class="main" style="width: 1100px;">
                <div id="app-table">
                    <div class="table">
                        <table border="0">
                        	<tr class="table-tr">
                        	    <th>公司名称</th>
                        	    <th>介绍</th>
                        	    <th>联系电话</th>
                        	    <th>地址</th>
                        	    <th>登录用户名</th>
                        	    <th>操作</th>
                        	</tr>
                            <tr class="table-tr">
                                <td>关东税有限公司</td>
                                <td>介绍介绍介绍介绍介绍介绍介绍</td>
                                <td>020-59632584</td>
                                <td>北京市朝阳区</td>
                                <td>登录用户名</td>
                                <td><span class="table-btn" onclick="showInfo()">登录日志</span><span class="table-btn" onclick="showInfo()">接口日志</span><span class="table-btn" onclick="passwordReset()">密码重置</span></td>
                            </tr>
                            <tr class="table-tr">
                                <td>关东税有限公司</td>
                                <td>介绍介绍介绍介绍介绍介绍介绍</td>
                                <td>020-59632584</td>
                                <td>北京市朝阳区</td>
                                <td>登录用户名</td>
                                <td><span class="table-btn" onclick="showInfo()">日志详情</span><span class="table-btn">密码重置</span></td>
                            </tr>
                            <tr class="table-tr">
                                <td>关东税有限公司</td>
                                <td>介绍介绍介绍介绍介绍介绍介绍</td>
                                <td>020-59632584</td>
                                <td>北京市朝阳区</td>
                                <td>登录用户名</td>
                                <td><span class="table-btn" onclick="showInfo()">日志详情</span><span class="table-btn">密码重置</span></td>
                            </tr>
                            <tr class="table-tr">
                                <td>关东税有限公司</td>
                                <td>介绍介绍介绍介绍介绍介绍介绍</td>
                                <td>020-59632584</td>
                                <td>北京市朝阳区</td>
                                <td>登录用户名</td>
                                <td><span class="table-btn" onclick="showInfo()">日志详情</span><span class="table-btn">密码重置</span></td>
                            </tr>
                            <tr class="table-tr">
                                <td>关东税有限公司</td>
                                <td>介绍介绍介绍介绍介绍介绍介绍</td>
                                <td>020-59632584</td>
                                <td>北京市朝阳区</td>
                                <td>登录用户名</td>
                                <td><span class="table-btn" onclick="showInfo()">日志详情</span><span class="table-btn">密码重置</span></td>
                            </tr>
                            <tr class="table-tr">
                                <td>关东税有限公司</td>
                                <td>介绍介绍介绍介绍介绍介绍介绍</td>
                                <td>020-59632584</td>
                                <td>北京市朝阳区</td>
                                <td>登录用户名</td>
                                <td><span class="table-btn" onclick="showInfo()">日志详情</span><span class="table-btn">密码重置</span></td>
                            </tr>
                            <tr class="table-tr">
                                <td>关东税有限公司</td>
                                <td>介绍介绍介绍介绍介绍介绍介绍</td>
                                <td>020-59632584</td>
                                <td>北京市朝阳区</td>
                                <td>登录用户名</td>
                                <td><span class="table-btn" onclick="showInfo()">日志详情</span><span class="table-btn">密码重置</span></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="page-box">
                    <div class="page-box-click">
                        首页
                    </div>
                    <div class="page-box-click">
                        上一页
                    </div>
                    <div class="">
                        共10页
                    </div>
                    <div class="">
                        当前为第 5 页
                    </div>
                    <div class="page-box-click">
                        下一页
                    </div>
                    <div class="page-box-click">
                        最后一页
                    </div>
                </div>
            </div>
        </div>
	</body>
    <script type="text/javascript">
        //打开日志详情
        function showInfo(){
            let content = '';
            for(let x =0 ;x<300;x++){
                content+=`
                <tr class="table-tr">
                    <td>关东税有限公司</td>
                    <td>介绍介绍介绍介绍介绍介绍介绍</td>
                    <td>020-59632584</td>
                    <td>北京市朝阳区</td>
                    <td>登录用户名</td>
                </tr>`
            }
            //初始化侧边标签栏
            $ws.sidecon.init();
            $ws.sidecon.add({
                title:"测试有限公司",
                content:`
                    <div id="app-table">
                        <div class="table">
                            <table border="0">
                            	<tr class="table-tr">
                            	    <th>公司名称</th>
                            	    <th>介绍</th>
                            	    <th>联系电话</th>
                            	    <th>地址</th>
                            	    <th>登录用户名</th>
                            	</tr>
                                ${content}
                            </table>
                        </div>
                    </div>
                    <div class="page-box">
                        <div class="page-box-click">
                            首页
                        </div>
                        <div class="page-box-click">
                            上一页
                        </div>
                        <div class="">
                            共10页
                        </div>
                        <div class="">
                            当前为第 5 页
                        </div>
                        <div class="page-box-click">
                            下一页
                        </div>
                        <div class="page-box-click">
                            最后一页
                        </div>
                    </div>
                `
            });
            $ws.sidecon.show();
        }
        //点击密码重置
        function passwordReset(){
            $ws.modal({
                headText: '密码重置',
                confirmText: '确定修改',
                content: `
                <div class="login-row">
                    公司名称：关东税有限公司
                </div>
                <div class="login-row">
                   登录用户名：G0001
                </div>
                <div class="login-row">
                    <div class="ws-input-text">
                        <div class="ws-input-left input-img-st"></div>
                        <input type="password" placeholder="请输入密码" id="p-pwd"/>
                        <label class="ws-input-box"></label>
                    </div>
                </div>
                `,
                onConfirm(e) {
                    //判断数据是否存在问题
                    let pwd = $('#p-pwd').val();
                    if (pwd.length == 0) {
                        $ws.toast('请输入当前密码', 'error');
                        return
                    }
                    $ws.ajax({
                        url: "../User/ModifyPsw",
                        data: {
                            OldPsw: pwd,
                        },
                        success() {
                            e.close();
                            $ws.toast('密码修改成功，请重新登录', {
                                callback: function() {
                                    window.location.href = "../user/index";
                                }
                            });
                        }
                    });
                }
            });
        }
    </script>
</html>
